jQuery.fn.accessibleNavigation=function(a){var a=jQuery.extend({orientation:"vertical",menuHoverClass:"is-visible"},a),b=jQuery(this),c=b.find("> li > a");c.each(function(){jQuery(this).hover(function(){g()}).focus(function(){g()}),jQuery(this).parents("li").find("ul")&&jQuery(this).attr("aria-haspopup","true").attr("aria-expanded","false").attr("aria-controls","nav-item-"+(jQuery(this).parents("li").index()+1)).focus(function(){f(jQuery(this))}).keydown(function(b){var c=jQuery(this);if("vertical"==a.orientation)switch(b.keyCode){case 38:0==c.parent("li").prev("li").length?c.parents("ul").find("> li").last().find("a").first().focus():c.parent("li").prev("li").find("a").first().focus(),b.preventDefault();break;case 40:0==c.parent("li").next("li").length?c.parents("ul").find("> li").first().find("a").first().focus():c.parent("li").next("li").find("a").first().focus(),b.preventDefault();break;case 39:case 32:case 13:c.parent("li").find("ul").find("a").first().focus(),b.preventDefault();break;case 27:c.parents(".inner").siblings(".close").focus()}})});var d=b.find("> li ul a");d.each(function(){jQuery(this).attr("tabindex","-1").keydown(function(b){if("vertical"==a.orientation)switch(b.keyCode){case 38:0==jQuery(this).parent("li").prev("li").length?jQuery(this).closest("ul").find("> li").last().find("a").first().focus():jQuery(this).parent("li").prev("li").find("a").first().focus(),b.preventDefault();break;case 40:0==jQuery(this).parent("li").next("li").length?jQuery(this).closest("ul").find("> li").first().find("a").first().focus():jQuery(this).parent("li").next("li").find("a").first().focus(),b.preventDefault();break;case 37:case 27:jQuery(this).closest("ul").parents("li").removeClass("is-active").find("a").first().focus(),jQuery(this).parents(".inner").removeClass("third-open"),b.preventDefault()}})});var e=b.find("ul");e.each(function(){jQuery(this).attr("aria-hidden","true").attr("aria-expanded","false").attr("aria-labelledby",jQuery(this).parents("li").find("a").first().attr("aria-controls"))}),b.find("a").last().keydown(function(a){9==a.keyCode&&g()}),jQuery(document).click(function(){g()});var f=function(b){g(),b.attr("aria-expanded","true"),b.parents("li").find("ul").attr("aria-hidden","false").attr("aria-expanded","true").addClass(a.menuHoverClass).find("a").attr("tabindex","0")},g=function(){b.find("ul").attr("aria-hidden","true").attr("aria-expanded","false").removeClass(a.menuHoverClass).find("a").attr("aria-expanded","false").attr("tabindex","-1")}};